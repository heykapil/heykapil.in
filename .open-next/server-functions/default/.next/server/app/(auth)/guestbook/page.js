(()=>{var e={};e.id=3137,e.ids=[3137],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32307:e=>{"use strict";e.exports=require("next/dist/server/app-render/prerender-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},29830:e=>{"use strict";e.exports=require("util/types")},66091:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>d,tree:()=>p});var r=s(40568),a=s(64006),i=s(90213),n=s.n(i),l=s(78787),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let p=["",{children:["(auth)",{children:["guestbook",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,59363)),"/Users/kapil/Documents/heykapil.in/app/(auth)/guestbook/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,28706,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3701)),"/Users/kapil/Documents/heykapil.in/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,99155)),"/Users/kapil/Documents/heykapil.in/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,28706,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kapil/Documents/heykapil.in/app/(auth)/guestbook/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},d=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(auth)/guestbook/page",pathname:"/guestbook",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},56642:(e,t,s)=>{let r={"7f1c634e496dd895dea4360bfcb9158f1df525e7":()=>Promise.resolve().then(s.bind(s,37770)).then(e=>e.saveGuestbookEntry)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"7f1c634e496dd895dea4360bfcb9158f1df525e7":a.bind(null,"7f1c634e496dd895dea4360bfcb9158f1df525e7")}},68671:(e,t,s)=>{Promise.resolve().then(s.bind(s,40802)),Promise.resolve().then(s.t.bind(s,73510,23))},83415:(e,t,s)=>{Promise.resolve().then(s.bind(s,90861)),Promise.resolve().then(s.t.bind(s,73510,23))},69286:(e,t,s)=>{Promise.resolve().then(s.bind(s,19098))},27548:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,52144,23)),Promise.resolve().then(s.t.bind(s,63582,23)),Promise.resolve().then(s.t.bind(s,9587,23)),Promise.resolve().then(s.t.bind(s,65329,23)),Promise.resolve().then(s.t.bind(s,50599,23))},3981:(e,t,s)=>{"use strict";s.d(t,{SubmitButton:()=>i});var r=s(20149),a=s(30028);function i({children:e,pendingState:t,...s}){let{pending:i}=(0,a.useFormStatus)();return(0,r.jsx)("button",{disabled:i,...s,children:i?t:e})}},40802:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(20149),a=s(63606),i=s(68882),n=s(3981);function l(){let e=(0,a.useRef)(null);return(0,r.jsxs)("form",{className:"relative max-w-[500px]",ref:e,action:async t=>{await (0,i.EM)(t),e.current?.reset()},children:[(0,r.jsx)("input",{"aria-label":"Your message",placeholder:"Your message...",name:"entry",type:"text",required:!0,className:"pl-4 pr-32 caret-current py-2 mt-1 focus:ring-neutral-500 focus:border-neutral-500 focus:outline-none block w-full border border-neutral-300 dark:border-neutral-700 rounded-md bg-gray-100 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100"}),(0,r.jsx)(n.SubmitButton,{pendingState:(0,r.jsx)("span",{className:"flex",children:"Signing..."}),type:"submit",className:"flex text-sm items-center justify-center absolute right-1 top-1 px-2 py-1 font-medium h-8 bg-neutral-200 dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 rounded-md w-fit",children:"Sign"})]})}},90861:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(20149),a=s(99548);function i({children:e}){return(0,r.jsxs)(r.Fragment,{children:[e,(0,r.jsx)(a.x7,{})]})}},19098:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(20149),a=s(63606);function i({error:e,reset:t}){return(0,a.useEffect)(()=>{console.error(e)},[e]),(0,r.jsx)("div",{children:(0,r.jsx)("p",{children:"Oh no, something went wrong... maybe refresh?"})})}},84230:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>e});var a=s(3571);let e=(await (0,a.createProxy)(String.raw`/Users/kapil/Documents/heykapil.in/app/(auth)/guestbook/form.tsx`)).default;r()}catch(e){r(e)}},1)},59363:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>c,metadata:()=>m});var a=s(57543),i=s(49024),n=s(84230),l=s(41119),o=s(63830),p=e([n]);n=(p.then?(await p)():p)[0];let m={title:"Guestbook",description:"Sign my guestbook and leave your mark."};async function c(){return(0,a.jsxs)("section",{children:[(0,a.jsx)("h1",{className:"font-medium text-2xl mb-8 tracking-tighter bg-gradient-to-r from-zinc-300 via-neutral-700 to-zinc-900  bg-clip-text text-transparent animate-fade-right",children:"Sign my guestbook"}),(0,a.jsxs)(i.Suspense,{fallback:(0,a.jsx)("p",{children:"Loading..."}),children:[(0,a.jsx)(u,{}),(0,a.jsx)(d,{})]})]})}async function u(){let e=await (0,l.z)();return e&&e?.email&&e.username?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("a",{href:"/signout?callback=/signin",children:(0,a.jsx)("button",{className:"text-xs text-neutral-700 dark:text-neutral-300 mt-2 mb-6 rounded-lg px-3 py-2 font-semibold bg-neutral-200 dark:bg-neutral-800 hover:bg-neutral-300 dark:hover:bg-neutral-700",children:"Sign Out"})})]}):(0,a.jsxs)("p",{className:"py-6",children:["Kindly"," ",(0,a.jsx)(o.default,{className:"underline",href:"/signin?callback=/guestbook",children:"login"})," ","to leave a message here."]})}async function d(){let e=await fetch("https://api.kapil.app/api/guestbook/get"),t=await e.json();return t.ok?(t?.data).map(e=>(0,a.jsx)("div",{className:"flex flex-col space-y-1 mb-4",children:(0,a.jsxs)("div",{className:"w-full text-sm break-words",children:[(0,a.jsxs)("span",{className:"inline-flex gap-1 items-baseline text-neutral-600 dark:text-neutral-400 mr-1",children:[(0,a.jsx)("img",{className:"rounded-full w-4 h-4 self-center",src:e.avatar,alt:e.fullname}),e.fullname,":"]}),e.message]})},e.id)):null}r()}catch(e){r(e)}})},78177:(e,t,s)=>{"use strict";s.d(t,{$X:()=>p,YB:()=>o,n0:()=>c,sw:()=>u});var r=s(26538);let a=process.env.PASETO_SECRET_KEY,i=process.env.PASETO_PUBLIC_KEY,n=process.env.PASETO_LOCAL_KEY,l={expiresIn:"1 day"};async function o({payload:e,key:t,options:s}){try{return(await r.V4.sign(e,t||a,s||l)).slice(10)}catch(e){return console.log(e),null}}async function p({token:e,key:t}){try{let s=await r.V4.verify("v4.public."+e,t||i);return JSON.parse(JSON.stringify(s))}catch(e){return console.log(e),null}}async function c(e,t){try{return(await r.V3.encrypt(e,n,t||l)).slice(9)}catch(e){return console.log(e),null}}async function u(e){try{let t=await r.V3.decrypt("v3.local."+e,n);return JSON.parse(JSON.stringify(t))}catch(e){return console.log(e),null}}},11535:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(3165),a=s.n(r);let i=process.env.REDIS_URL;async function n(){return new(a())(i)}},41119:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var r=s(43150),a=s(78177),i=s(11535),n=s(69319);async function l(){let e;let t=r.cookies().get("profileToken")?.value||"",s=r.cookies().get("sessionId")?.value||"",l=r.cookies().get("accessToken")?.value||"",o=r.cookies().get("refreshToken")?.value||"";if(s&&l&&o&&t||(e=null),!t||s&&l&&o||(e=null),t){let r=await (0,a.sw)(t),l=await (0,i.T)(),o=await l.get(r?.userid);console.log(o),o===s?e=r:(e=null,(0,n.redirect)("/signout?error=Session Expired")),await l.quit()}else e=null;return e}},79154:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var r=s(57543),a=s(63830);let i={"/":{name:"home"},"/work":{name:"work"},"/musing":{name:"musing"},"/snippet":{name:"snippet"},"/guestbook":{name:"guestbook"}};function n(){return(0,r.jsx)("aside",{className:"-ml-[8px] mb-16 tracking-tight",children:(0,r.jsx)("div",{className:"lg:sticky lg:top-20",children:(0,r.jsx)("nav",{className:"fade relative flex scroll-pr-6 flex-row items-start px-0 pb-0 md:relative md:overflow-auto",id:"nav",children:(0,r.jsx)("div",{className:"flex flex-row space-x-0 pr-10",children:Object.entries(i).map(([e,{name:t}])=>(0,r.jsx)(a.default,{href:e,className:"relative flex px-2 py-1 align-middle transition-all hover:text-neutral-800 dark:hover:text-neutral-200",children:t},e))})})})})}},6997:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>e});var a=s(3571);let e=(await (0,a.createProxy)(String.raw`/Users/kapil/Documents/heykapil.in/app/components/toast-provider.tsx`)).default;r()}catch(e){r(e)}},1)},99155:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>e});var a=s(3571);let e=(await (0,a.createProxy)(String.raw`/Users/kapil/Documents/heykapil.in/app/error.tsx`)).default;r()}catch(e){r(e)}},1)},3701:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>c,metadata:()=>u});var a=s(57543),i=s(14841),n=s.n(i);s(32136);var l=s(79154),o=s(6997),p=e([o]);o=(p.then?(await p)():p)[0];let u={metadataBase:new URL("https://kapil.app"),title:{default:"Kapil Chaudhary",template:"%s | Kapil Chaudhary"},description:"Developer, writer, and creator.",openGraph:{title:"Kapil Chaudhary",description:"Developer, writer, and creator.",url:"https://kapil.app",siteName:"Kapil Chaudhary",locale:"en_US",type:"website",images:[{url:"https://og.kapil.app/api/og?title=Kapil Chaudhary&subtitle=Research scholar&bg=https://cf.kapil.app/images/kapiljch-20220503-0001.jpg"}]},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}},twitter:{title:"Kapil Chaudhary",card:"summary_large_image"},icons:{apple:[{url:"https://cf.kapil.app/images/website/favicons/apple-icon-180x180.png",sizes:"180x180",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/apple-icon-57x57.png",sizes:"57x57",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/apple-icon-76x76.png",sizes:"76x76",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/applce-icon-152x152.png",sizes:"152x152",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/apple-icon-144x144.png",sizes:"144x144",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/apple-icon-120x120.png",sizes:"120x120",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/apple-icon-114x114.png",sizes:"114x114",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/apple-icon-60x60.png",sizes:"60x60",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/apple-icon-72x72.png",sizes:"72x72",type:"image/png"},{url:"https://cf.kapil.app/images/website/favicons/favicon-96x96.png",sizes:"96x96",type:"image/png"}],other:[{rel:"icon",url:"https://cf.kapil.app/images/website/favicons/favicon.ico"},{rel:"icon",url:"https://cf.kapil.app/images/website/favicons/android-icon-192x192.png",sizes:"192x192",type:"image/png"},{rel:"icon",url:"https://cf.kapil.app/images/website/favicons/favicon-32x32.png",sizes:"32x32",type:"image/png"},{rel:"manifest",url:"https://cf.kapil.app/images/website/favicons/manifest.json"}],icon:"https://cf.kapil.app/images/website/favicons/favicon-16x16.png"}},d=(...e)=>e.filter(Boolean).join(" ");function c({children:e}){return(0,a.jsx)("html",{lang:"en",className:d("text-black bg-white dark:text-white dark:bg-[#111010]",n().className),children:(0,a.jsx)("body",{className:"antialiased max-w-2xl mb-40 flex flex-col md:flex-row mx-4 mt-8 lg:mx-auto",children:(0,a.jsx)(o.Z,{children:(0,a.jsxs)("main",{className:"flex-auto min-w-0 mt-6 flex flex-col px-2 md:px-0",children:[(0,a.jsx)(l.w,{}),e]})})})})}r()}catch(e){r(e)}})},32136:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4615,8045,9997,3272,4586],()=>s(66091));module.exports=r})();